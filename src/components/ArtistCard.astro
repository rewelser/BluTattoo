---
interface Props {
  url: string;
  data: {
    title: string;
    styles?: string[];
    images?: { src: string; alt?: string }[];
    instagram?: string;
  };
}
const { url, data } = Astro.props;

// Use the first image as the card thumbnail
const thumb = data.images?.[0];
---
<article class="rounded-md overflow-hidden shadow hover:shadow-lg transition-shadow bg-white">
  <a href={url} class="block focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
    {thumb && (
      <img
        src={`${thumb.src}?w=600&auto=format`}
        srcset={`${thumb.src}?w=400 400w, ${thumb.src}?w=800 800w`}
        sizes="(max-width: 768px) 100vw, 33vw"
        alt={thumb.alt ?? `${data.title} portfolio thumbnail`}
        class="w-full h-64 object-cover"
        loading="lazy"
        decoding="async"
      />
    )}
    <div class="p-4">
      <h2 class="text-xl font-semibold mb-1">{data.title}</h2>

      {data.styles && data.styles.length > 0 && (
        <p class="text-sm text-gray-600 mb-2">
          {data.styles.join(", ")}
        </p>
      )}

      {data.instagram && (
        <span class="inline-flex items-center text-indigo-600 text-sm hover:underline">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="w-4 h-4 mr-1"
            aria-hidden="true"
          >
            <path d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2Zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5a4.25 4.25 0 0 0 4.25-4.25v-8.5A4.25 4.25 0 0 0 16.25 3.5h-8.5ZM12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10Zm0 1.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7ZM17 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/>
          </svg>
          Instagram
        </span>
      )}
    </div>
  </a>
</article>
