---
// MenuIcon.astro
// Usage:
// <MenuIcon class="h-[1.25em] w-[1.25em]" />
// or
// <MenuIcon open={isOpen} class="h-6 w-6" />

type Props = {
  /** When true, shows the "X" state. If omitted, you can drive it via aria-expanded CSS instead. */
  open?: boolean;
  /** Optional extra classes applied to the <svg>. */
  class?: string;
};

const { open = false, class: className = "" } = Astro.props as Props;
---
<svg
  class={`menu-icon ${open ? "is-open" : ""} ${className}`.trim()}
  viewBox="0 0 24 24"
  aria-hidden="true"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
>
  <path class="top" d="M4 7h16" />
  <path class="mid" d="M4 12h16" />
  <path class="bot" d="M4 17h16" />
</svg>

<style>
  .menu-icon .top,
  .menu-icon .mid,
  .menu-icon .bot {
    transition: transform 200ms ease, opacity 150ms ease;
    transform-origin: 12px 12px;
  }

  /* Controlled via prop: open={true} */
  .menu-icon.is-open .top {
    transform: translateY(5px) rotate(45deg);
  }
  .menu-icon.is-open .mid {
    opacity: 0;
  }
  .menu-icon.is-open .bot {
    transform: translateY(-5px) rotate(-45deg);
  }

  /* Controlled via parent button aria-expanded (no prop needed) */
  :global(button[aria-expanded="true"] .menu-icon .top) {
    transform: translateY(5px) rotate(45deg);
  }
  :global(button[aria-expanded="true"] .menu-icon .mid) {
    opacity: 0;
  }
  :global(button[aria-expanded="true"] .menu-icon .bot) {
    transform: translateY(-5px) rotate(-45deg);
  }
</style>
